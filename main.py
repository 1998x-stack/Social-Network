structure = {
    "第Ⅰ部分 网络的实证研究": {
        "第2章 技术网络": {
            "2.1 Internet": {},
            "2.2 电话网络": {},
            "2.3 电力网络": {},
            "2.4 交通网络": {},
            "2.5 配送网络": {}
        },
        "第3章 社会网络": {
            "3.1 社会网络实证研究": {},
            "3.2 采访与问卷": {},
            "3.3 直接观察": {},
            "3.4 来自于档案或第三方的数据": {},
            "3.5 隶属网络": {},
            "3.6 小世界实验": {},
            "3.7 雪球式抽样、接触者追踪及随机游走": {}
        },
        "第4章 信息网络": {
            "4.1 万维网": {},
            "4.2 引文网络": {},
            "4.3 其他类型的信息网络": {}
        },
        "第5章 生物网络": {
            "5.1 生物化学网络": {},
            "5.2 神经网络": {},
            "5.3 生态网络": {}
        }
    },
    "第Ⅱ部分 网络理论基础": {
        "第6章 网络的数学基础": {
            "6.1 网络及其表示方法": {},
            "6.2 邻接矩阵": {},
            "6.3 加权网络": {},
            "6.4 有向网络": {},
            "6.5 超图": {},
            "6.6 二分网络": {},
            "6.7 树": {},
            "6.8 平面网络": {},
            "6.9 度": {},
            "6.10 路径": {},
            "6.11 分支": {},
            "6.12 独立路径、连通度和割集": {},
            "6.13 图拉普拉斯矩阵": {},
            "6.14 随机游走": {},
        },
        "第7章 测度与参数": {
            "7.1 度中心性": {},
            "7.2 特征向量中心性": {},
            "7.3 Katz中心性": {},
            "7.4 PageRank": {},
            "7.5 核心顶点与权威顶点": {},
            "7.6 接近度中心性": {},
            "7.7 介数中心性": {},
            "7.8 顶点群组": {},
            "7.9 传递性": {},
            "7.10 相互性": {},
            "7.11 有符号边和结构平衡": {},
            "7.12 相似性": {},
            "7.13 同质性和同配混合": {},
        },
        "第8章 网络的大规模结构": {
            "8.1 分支": {},
            "8.2 最短路径和小世界效应": {},
            "8.3 度分布": {},
            "8.4 幂律和无标度网络": {},
            "8.5 其他中心性测度的分布": {},
            "8.6 聚类系数": {},
            "8.7 同配混合": {},
        }
    },
    "第Ⅲ部分 计算机算法": {
        "第9章 算法基本概念": {
            "9.1 运行时间和计算复杂度": {},
            "9.2 网络数据的存储": {},
            "9.3 邻接矩阵": {},
            "9.4 邻接表": {},
            "9.5 树": {},
            "9.6 网络的其他表示方法": {},
            "9.7 堆": {},
        },
        "第10章 网络基础算法": {
            "10.1 度和度分布的算法": {},
            "10.2 聚类系数": {},
            "10.3 最短路径和广度优先搜索": {},
            "10.4 加权网络中的最短路径": {},
            "10.5 最大流和最小割": {},
        },
        "第11章 矩阵算法与图划分": {
            "11.1 主特征向量和特征向量中心性": {},
            "11.2 将网络划分成簇": {},
            "11.3 图划分": {},
            "11.4 Kernighan-Lin算法": {},
            "11.5 谱划分": {},
            "11.6 社团发现": {},
            "11.7 简单模块度最大化": {},
            "11.8 谱模块度最大化": {},
            "11.9 将网络划分为两个以上群组": {},
            "11.10 其他模块度最大化方法": {},
            "11.11 社团发现的其他算法": {},
        }
    },
    "第Ⅳ部分 网络模型": {
        "第12章 随机图": {
            "12.1 随机图": {},
            "12.2 边数和度的均值": {},
            "12.3 度分布": {},
            "12.4 聚类系数": {},
            "12.5 巨分支": {},
            "12.6 小分支": {},
            "12.7 路径长度": {},
            "12.8 随机图的问题": {},
        },
        "第13章 任意度分布的随机图": {
            "13.1 生成函数": {},
            "13.2 配置模型": {},
            "13.3 余度分布": {},
            "13.4 聚类系数": {},
            "13.5 度分布的生成函数": {},
            "13.6 一个顶点的两跳邻居顶点数量": {},
            "13.7 小分支的生成函数": {},
            "13.8 巨分支": {},
            "13.9 小分支的规模分布": {},
            "13.10 幂律度分布": {},
            "13.11 有向随机图": {},
        },
        "第14章 网络生成模型": {
            "14.1 优先连接模型": {},
            "14.2 Barabási-Albert模型": {},
            "14.3 优先连接模型的其他性质": {},
            "14.4 优先连接模型的扩展": {},
            "14.5 顶点复制模型": {},
            "14.6 网络优化模型": {},
        },
        "第15章 其他网络模型": {
            "15.1 小世界模型": {},
            "15.2 指数随机图模型": {},
        }
    },
    "第Ⅴ部分 网络过程": {
        "第16章 渗流和网络弹性": {
            "16.1 渗流": {},
            "16.2 顶点的均匀随机删除": {},
            "16.3 顶点的非均匀删除": {},
            "16.4 实际网络中的渗流": {},
            "16.5 渗流的计算机算法": {},
        },
        "第17章 传染病的网络模型": {
            "17.1 疾病传播模型": {},
            "17.2 SI模型": {},
            "17.3 SIR模型": {},
            "17.4 SIS模型": {},
            "17.5 SIRS模型": {},
            "17.6 传染病的网络模型": {},
            "17.7 传染病网络模型的晚期特征": {},
            "17.8 SIR模型的晚期特征": {},
            "17.9 传染病网络模型的时间依赖特性": {},
            "17.10 SI模型的时间依赖特性": {},
            "17.11 SIR模型的时间依赖特性": {},
            "17.12 SIS模型的时间依赖特性": {},
        },
        "第18章 网络动力系统": {
            "18.1 动力系统": {},
            "18.2 网络动力学": {},
            "18.3 多变量动力学": {},
        },
        "第19章 网络搜索": {
            "19.1 Web搜索": {},
            "19.2 分布式数据库搜索": {},
            "19.3 消息传递": {}
        }
    }
}

import os
import json
from typing import Union, Dict, List, Any

def create_directories_and_files(
    base_path: str, 
    structure: Dict[str, Any], 
    readme_file, 
    parent_path: str = "", 
    level: int = 1
):
    """
    根据给定的目录结构创建目录和文件，并生成 README.md 文件。

    Args:
        base_path (str): 根目录路径。
        structure (Dict[str, Any]): 目录结构的嵌套字典。
        readme_file (File): 用于写入README内容的文件对象。
        parent_path (str): 父目录路径。
        level (int): 目录的层级，用于确定 README 标题级别。

    Returns:
        None
    """
    heading = "#" * level

    for key, value in structure.items():
        current_path = os.path.join(base_path, key.replace(" ", "_").replace("-", "_"))

        # 创建目录
        os.makedirs(current_path, exist_ok=True)

        # 在README中添加章节标题
        if parent_path:
            readme_file.write(f"{heading} {parent_path}/{key}\n\n")
        else:
            readme_file.write(f"{heading} {key}\n\n")

        # 递归调用创建子目录和文件
        if isinstance(value, dict) and value:
            create_directories_and_files(
                current_path, 
                value, 
                readme_file, 
                parent_path + "/" + key if parent_path else key, 
                level + 1
            )
        elif isinstance(value, list):
            for item in value:
                file_name = item.replace(" ", "_").replace("-", "_") + ".py"
                file_path = os.path.join(current_path, file_name)
                with open(file_path, 'w', encoding='utf-8') as file:
                    file.write(f"# {item}\n\n")
                    file.write(f'"""\nLecture: {parent_path}/{key}\nContent: {item}\n"""\n\n')

                # 在README中添加文件链接
                item_clean = item.replace(" ", "_").replace("-", "_")
                readme_file.write(f"- [{item}](./{parent_path}/{key}/{item_clean}.py)\n")
        else:
            # 创建文件并写入初始内容
            file_name = key.replace(" ", "_").replace("-", "_") + ".py"
            file_path = os.path.join(current_path, file_name)
            with open(file_path, 'w', encoding='utf-8') as file:
                file.write(f"# {key}\n\n")
                file.write(f'"""\nLecture: {parent_path}/{key}\nContent: {key}\n"""\n\n')

            # 在README中添加文件链接
            parent_clean = parent_path.replace(" ", "_").replace("-", "_")
            key_clean = key.replace(" ", "_").replace("-", "_")
            readme_file.write(f"- [{key}](./{parent_clean}/{key_clean}/{file_name})\n")

        # 添加空行以分隔不同的章节
        readme_file.write("\n")

def main():
    root_dir = './'

    # 创建根目录
    os.makedirs(root_dir, exist_ok=True)

    # 创建 README.md 文件
    with open(os.path.join(root_dir, "README.md"), 'w', encoding='utf-8') as readme_file:
        readme_file.write("# 网络的实证研究\n\n")
        readme_file.write("这是一个关于网络的实证研究的目录结构。\n\n")
        create_directories_and_files(root_dir, structure, readme_file)

    print("目录和文件结构已生成，并创建 README.md 文件。")

if __name__ == "__main__":
    main()
